2025-04-15T07:31:34.868Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:31:34.871Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:31:34.871Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:31:34.895Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:31:34.895Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:31:34.896Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:31:34.918Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:31:34.922Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:31:34.922Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:31:34.923Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:31:34.923Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:31:34.923Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:31:34.924Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:31:34.924Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:31:34.924Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:31:34.926Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:31:34.926Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:31:34.926Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:31:34.927Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:31:34.948Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T07:31:34.949Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:31:34.949Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:31:34.974Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:31:59.117Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:31:59.118Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:31:59.137Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T07:31:59.137Z","verificationLevel":"0"}
2025-04-15T07:32:00.966Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:32:00.983Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:32:50.611Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T07:32:50.611Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T07:32:50.611Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA"
} {"service":"oracle-service"}
2025-04-15T07:32:50.611Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:32:50.611Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:33:00.028Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:33:00.044Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:33:29.877Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T07:33:51.637Z info: Event detected: verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:33:51.638Z info: Verification requested for user 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0, id: 1 {"service":"oracle-service"}
2025-04-15T07:33:51.656Z info: Verification 1 has status 1, not pending. Skipping processing. {"service":"oracle-service"}
2025-04-15T07:34:00.124Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:34:00.140Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:35:00.193Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:35:00.194Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T07:35:00.208Z info: Polling for verification.VerificationRequested events from block 18 to 24 {"service":"oracle-service"}
2025-04-15T07:35:00.209Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:35:00.223Z info: Found 1 missed verification events {"service":"oracle-service"}
2025-04-15T07:35:00.236Z info: Polling for moderation.ModerationActionCreated events from block 24 to 24 {"service":"oracle-service"}
2025-04-15T07:35:00.237Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T07:35:00.237Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T07:36:00.275Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:36:00.292Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:37:00.344Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:37:00.360Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:37:37.763Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:37:37.766Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:37:37.766Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:37:37.790Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:37:37.791Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:37:37.791Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:37:37.813Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:37:37.818Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:37:37.818Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:37:37.819Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:37:37.819Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:37:37.819Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:37:37.819Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:37:37.820Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:37:37.820Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:37:37.822Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:37:37.822Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:37:37.822Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:37:37.823Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:37:37.843Z info: Current block: 24 {"service":"oracle-service"}
2025-04-15T07:37:37.843Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:37:37.843Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:37:37.868Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:38:01.436Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:38:01.439Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:38:01.439Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:38:01.463Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:38:01.463Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:38:01.464Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:38:01.484Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:38:01.489Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:38:01.489Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:38:01.490Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:38:01.490Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:38:01.490Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:38:01.490Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:38:01.491Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:38:01.491Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:38:01.493Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:38:01.493Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:38:01.493Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:38:01.494Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:38:01.515Z info: Current block: 24 {"service":"oracle-service"}
2025-04-15T07:38:01.515Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:38:01.515Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:38:01.541Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:38:35.504Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:38:35.506Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:38:35.507Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:38:35.532Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:38:35.533Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:38:35.533Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:38:35.555Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:38:35.560Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:38:35.560Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:38:35.560Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:38:35.560Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:38:35.560Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:38:35.561Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:38:35.561Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:38:35.562Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:38:35.563Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:38:35.563Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:38:35.564Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:38:35.564Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:38:35.584Z info: Current block: 24 {"service":"oracle-service"}
2025-04-15T07:38:35.584Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:38:35.585Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:38:35.609Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:39:00.590Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:39:00.606Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:40:00.663Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:40:00.667Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T07:40:00.683Z info: Polling for verification.VerificationRequested events from block 24 to 24 {"service":"oracle-service"}
2025-04-15T07:40:00.685Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:40:00.698Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T07:40:00.699Z info: Polling for moderation.ModerationActionCreated events from block 24 to 24 {"service":"oracle-service"}
2025-04-15T07:40:00.699Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T07:40:00.700Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T07:41:00.732Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:41:00.747Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:41:32.891Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:41:43.321Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:41:43.349Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:42:00.811Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:42:00.828Z info: Found 1 pending verifications {"service":"oracle-service"}
2025-04-15T07:42:26.623Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:42:26.686Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:42:48.493Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T07:42:48.494Z info: Stopping Oracle Service {"service":"oracle-service"}
2025-04-15T07:42:48.494Z info: Oracle Service stopped {"service":"oracle-service"}
2025-04-15T07:42:58.497Z error: Could not close connections in time, forcefully shutting down {"service":"oracle-service"}
2025-04-15T07:43:06.368Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:43:06.370Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:43:06.370Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:43:06.394Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:43:06.395Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:43:06.396Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:43:06.417Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:43:06.423Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:43:06.423Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:43:06.423Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:43:06.423Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:43:06.424Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:43:06.424Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:43:06.425Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:43:06.425Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:43:06.427Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:43:06.427Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:43:06.427Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:43:06.428Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:43:06.448Z warn: Could not get current block number: {"service":"oracle-service"}
2025-04-15T07:43:06.448Z warn: Using block 0 as starting point in development mode {"service":"oracle-service"}
2025-04-15T07:43:06.448Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:43:06.448Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:43:06.464Z warn: Could not check oracle permissions:  {"service":"oracle-service"}
2025-04-15T07:43:46.285Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:43:46.326Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:43:46.339Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T07:43:46Z"],"service":"oracle-service"}
2025-04-15T07:43:46.414Z info: Transaction submitted: 0x8bd72f9e2adebeacfb07d304e752cb300deec94b66647dce90340651e280067f {"service":"oracle-service"}
2025-04-15T07:43:50.639Z info: Transaction confirmed: 0x8bd72f9e2adebeacfb07d304e752cb300deec94b66647dce90340651e280067f, block: 19 {"service":"oracle-service"}
2025-04-15T07:43:50.639Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0x8bd72f9e2adebeacfb07d304e752cb300deec94b66647dce90340651e280067f {"service":"oracle-service"}
2025-04-15T07:43:52.690Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:43:52.722Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:43:59.832Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:44:00.496Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:44:00.509Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:44:54.560Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T07:44:54.560Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T07:44:54.560Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T07:44:54Z"
} {"service":"oracle-service"}
2025-04-15T07:44:54.560Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:44:54.560Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:45:00.571Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:45:00.572Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T07:45:00.584Z info: Polling for verification.VerificationRequested events from block 0 to 19 {"service":"oracle-service"}
2025-04-15T07:45:00.586Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:45:00.597Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T07:45:00.598Z info: Polling for moderation.ModerationActionCreated events from block 19 to 19 {"service":"oracle-service"}
2025-04-15T07:45:00.598Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T07:45:00.598Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T07:45:13.259Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T07:45:26.288Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:45:29.757Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T07:45:29.772Z info: Current verification count for token 1: 0 {"service":"oracle-service"}
2025-04-15T07:45:29.785Z info: Using second verifier address: [object Object] {"service":"oracle-service"}
2025-04-15T07:45:29.813Z info: Granting VERIFIER_ROLE to second verifier [object Object] {"service":"oracle-service"}
2025-04-15T07:45:29.813Z info: Executing identity.grantRole with args: {"0":"0x0ce23c3e399818cfee81a7ab0880f714e53d7672b08df0fa62f2843416e1ea09","1":{"provider":{},"address":"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"},"service":"oracle-service"}
2025-04-15T07:45:29.887Z info: Transaction submitted: 0xbfc75d743d2690cecb70df04a7bd84b0abb45d96c0459df8a067ec30176b31e7 {"service":"oracle-service"}
2025-04-15T07:45:31.087Z info: Transaction confirmed: 0xbfc75d743d2690cecb70df04a7bd84b0abb45d96c0459df8a067ec30176b31e7, block: 20 {"service":"oracle-service"}
2025-04-15T07:45:31.087Z info: VERIFIER_ROLE granted to [object Object] {"service":"oracle-service"}
2025-04-15T07:45:31.087Z info: Executing identity.approveVerification as second verifier with args: {"0":"1","1":2,"service":"oracle-service"}
2025-04-15T07:45:31.101Z info: Using account [object Object] as second verifier {"service":"oracle-service"}
2025-04-15T07:45:31.101Z error: Error executing identity.approveVerification as second verifier: ethers.getSigner is not a function {"service":"oracle-service","stack":"TypeError: ethers.getSigner is not a function\n    at BlockchainService.executeAsSecondVerifier (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/services/blockchain.service.js:639:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/verifications.controller.js:411:7"}
2025-04-15T07:45:31.101Z error: Error adding second verifier approval: ethers.getSigner is not a function {"service":"oracle-service"}
2025-04-15T07:45:34.247Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:46:00.644Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:46:00.658Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:46:37.051Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:46:37.053Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:46:37.054Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:46:37.077Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:46:37.078Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:46:37.079Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:46:37.100Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:46:37.106Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:46:37.106Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:46:37.107Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:46:37.107Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:46:37.107Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:46:37.107Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:46:37.108Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:46:37.108Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:46:37.110Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:46:37.110Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:46:37.110Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:46:37.110Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:46:37.133Z info: Current block: 20 {"service":"oracle-service"}
2025-04-15T07:46:37.133Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:46:37.133Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:46:37.161Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:46:49.821Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:46:49.824Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:46:49.825Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:46:49.850Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:46:49.850Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:46:49.851Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:46:49.872Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:46:49.876Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:46:49.877Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:46:49.877Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:46:49.877Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:46:49.877Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:46:49.878Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:46:49.878Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:46:49.878Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:46:49.880Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:46:49.880Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:46:49.880Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:46:49.881Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:46:49.902Z info: Current block: 20 {"service":"oracle-service"}
2025-04-15T07:46:49.902Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:46:49.902Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:46:49.927Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:47:00.896Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:47:00.917Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:47:27.855Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:47:27.857Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:47:27.858Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:47:27.882Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:47:27.883Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:47:27.884Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:47:27.906Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:47:27.911Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:47:27.911Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:47:27.912Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:47:27.912Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:47:27.912Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:47:27.913Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:47:27.913Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:47:27.913Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:47:27.915Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:47:27.915Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:47:27.915Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:47:27.916Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:47:27.940Z info: Current block: 20 {"service":"oracle-service"}
2025-04-15T07:47:27.940Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:47:27.940Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:47:27.969Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:48:00.958Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:48:00.978Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:49:00.028Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:49:00.043Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:49:04.550Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:04.579Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:07.893Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:09.321Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T07:49:09.322Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T07:49:09.322Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T07:49:09Z"
} {"service":"oracle-service"}
2025-04-15T07:49:09.322Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:09.322Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:16.784Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T07:49:19.659Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:22.143Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T07:49:22.145Z info: Executing script to add second verifier approval for token 1 {"service":"oracle-service"}
2025-04-15T07:49:22.605Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:49:22.608Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:49:22.608Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T07:49:22.631Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T07:49:22.632Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T07:49:22.633Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T07:49:22.654Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T07:49:22.659Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T07:49:22.659Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T07:49:22.659Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T07:49:22.659Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T07:49:22.660Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T07:49:22.660Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T07:49:22.660Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T07:49:22.661Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T07:49:22.662Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T07:49:22.662Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T07:49:22.663Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T07:49:22.663Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T07:49:22.684Z info: Current block: 20 {"service":"oracle-service"}
2025-04-15T07:49:22.684Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T07:49:22.684Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T07:49:22.711Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T07:49:25.226Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:52.441Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T07:49:52.441Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T07:49:52.441Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA"
} {"service":"oracle-service"}
2025-04-15T07:49:52.441Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:49:52.441Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:50:00.149Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T07:50:00.717Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:50:00.720Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T07:50:00.733Z info: Polling for verification.VerificationRequested events from block 20 to 20 {"service":"oracle-service"}
2025-04-15T07:50:00.735Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:50:00.747Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T07:50:00.748Z info: Polling for moderation.ModerationActionCreated events from block 20 to 20 {"service":"oracle-service"}
2025-04-15T07:50:00.748Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T07:50:00.748Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T07:51:00.793Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T07:51:00.812Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T07:51:35.670Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:51:35.716Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T07:51:49.596Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T17:48:09.376Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:48:09.379Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:48:09.379Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:48:09.403Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T17:48:09.404Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T17:48:09.405Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T17:48:09.429Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T17:48:09.434Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T17:48:09.434Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T17:48:09.435Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T17:48:09.435Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T17:48:09.435Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T17:48:09.436Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T17:48:09.436Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:48:09.436Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T17:48:09.438Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T17:48:09.438Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T17:48:09.438Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T17:48:09.439Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T17:48:09.460Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T17:48:09.460Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T17:48:09.460Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T17:48:09.485Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T17:48:25.011Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:25.055Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:25.069Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T17:48:25Z"],"service":"oracle-service"}
2025-04-15T17:48:25.204Z info: Transaction submitted: 0x85890d1ce264d7f6d73aa68a08402daedf0ca5a937647b176ff223bd602ca35b {"service":"oracle-service"}
2025-04-15T17:48:25.569Z info: Transaction confirmed: 0x85890d1ce264d7f6d73aa68a08402daedf0ca5a937647b176ff223bd602ca35b, block: 19 {"service":"oracle-service"}
2025-04-15T17:48:25.569Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0x85890d1ce264d7f6d73aa68a08402daedf0ca5a937647b176ff223bd602ca35b {"service":"oracle-service"}
2025-04-15T17:48:25.583Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:48:25.583Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:25.599Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T17:48:25.599Z","verificationLevel":"0"}
2025-04-15T17:48:27.617Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:27.648Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:38.226Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:40.249Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T17:48:40.249Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T17:48:40.249Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T17:48:40Z"
} {"service":"oracle-service"}
2025-04-15T17:48:40.249Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:40.249Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:53.543Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T17:48:55.176Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:56.590Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T17:48:56.592Z info: Executing script to add second verifier approval for token 1 {"service":"oracle-service"}
2025-04-15T17:48:57.003Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:48:57.005Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:48:57.005Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:48:57.031Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T17:48:57.032Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T17:48:57.032Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T17:48:57.054Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T17:48:57.060Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T17:48:57.060Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T17:48:57.060Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T17:48:57.060Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T17:48:57.060Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T17:48:57.061Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T17:48:57.061Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:48:57.061Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T17:48:57.063Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T17:48:57.063Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T17:48:57.063Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T17:48:57.064Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T17:48:57.084Z info: Current block: 19 {"service":"oracle-service"}
2025-04-15T17:48:57.084Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T17:48:57.084Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T17:48:57.111Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:48:57.111Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:48:57.111Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T17:48:57.127Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T17:48:57.127Z","verificationLevel":"0"}
2025-04-15T17:48:59.248Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:49:00.068Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T17:49:00.088Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T17:50:00.147Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T17:50:00.153Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T17:50:00.167Z warn: Development mode: Error getting block number:  {"service":"oracle-service"}
2025-04-15T17:50:00.167Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T17:50:00.167Z warn: Development mode: Error getting block number:  {"service":"oracle-service"}
2025-04-15T17:50:00.167Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T17:50:00.167Z error: Error checking pending verifications: {"service":"oracle-service","code":"ECONNREFUSED","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1139:18)\n    at afterConnectMultiple (node:net:1712:7)"}
2025-04-15T17:50:06.352Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T17:57:00.387Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:57:00.390Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:57:00.390Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:57:00.496Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T17:57:00.497Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T17:57:00.498Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T17:57:00.521Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T17:57:00.527Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T17:57:00.527Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T17:57:00.527Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T17:57:00.528Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T17:57:00.528Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T17:57:00.528Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T17:57:00.528Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:57:00.529Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T17:57:00.530Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T17:57:00.530Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T17:57:00.531Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T17:57:00.531Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T17:57:00.553Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T17:57:00.553Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T17:57:00.553Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T17:57:00.579Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T17:58:00.600Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T17:58:00.621Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T17:58:16.005Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:16.048Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:16.061Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T17:58:16Z"],"service":"oracle-service"}
2025-04-15T17:58:16.139Z info: Transaction submitted: 0x04d1cc7a1b59751aa9628bdffb38b216f61173ad56413251784f90bcc5a54be5 {"service":"oracle-service"}
2025-04-15T17:58:16.956Z info: Transaction confirmed: 0x04d1cc7a1b59751aa9628bdffb38b216f61173ad56413251784f90bcc5a54be5, block: 19 {"service":"oracle-service"}
2025-04-15T17:58:16.957Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0x04d1cc7a1b59751aa9628bdffb38b216f61173ad56413251784f90bcc5a54be5 {"service":"oracle-service"}
2025-04-15T17:58:16.973Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:58:16.973Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:17.003Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T17:58:17.003Z","verificationLevel":"0"}
2025-04-15T17:58:22.040Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:22.070Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:25.339Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:32.856Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T17:58:32.856Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T17:58:32.856Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T17:58:32Z"
} {"service":"oracle-service"}
2025-04-15T17:58:32.857Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:32.857Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:58:48.440Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T17:58:53.290Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:59:00.666Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T17:59:00.689Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T17:59:08.384Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T17:59:13.001Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T17:59:13.018Z info: Current verification level before approval: UNVERIFIED {"service":"oracle-service"}
2025-04-15T17:59:13.018Z info: Executing identity.approveVerification as second verifier with args: {"0":"1","1":2,"service":"oracle-service"}
2025-04-15T17:59:13.032Z info: Using account [object Object] as second verifier {"service":"oracle-service"}
2025-04-15T17:59:13.061Z info: Second verifier doesn't have VERIFIER_ROLE, granting now {"service":"oracle-service"}
2025-04-15T17:59:17.273Z info: VERIFIER_ROLE granted to [object Object] {"service":"oracle-service"}
2025-04-15T17:59:17.362Z error: Error executing identity.approveVerification as second verifier: could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'", "txHash": "0x120477e4c12c66fa3e06b001f897076e26f74c580a478e5cdcd3953a45a5e79e" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'" }, payload={ "id": 137, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f8b282053980843b9aca0084454ec3fa831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c080a09d7c4192342ae865243267b42569d346ed14d5ae75041c1e07a52aaea615cea2a058596ac5acae1e06af019995eb9cdad85f72d95b54ea524b5b6539d235e632eb" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'","txHash":"0x120477e4c12c66fa3e06b001f897076e26f74c580a478e5cdcd3953a45a5e79e","data":"0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f8b282053980843b9aca0084454ec3fa831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c080a09d7c4192342ae865243267b42569d346ed14d5ae75041c1e07a52aaea615cea2a058596ac5acae1e06af019995eb9cdad85f72d95b54ea524b5b6539d235e632eb"],"id":137,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'\", \"txHash\": \"0x120477e4c12c66fa3e06b001f897076e26f74c580a478e5cdcd3953a45a5e79e\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'\" }, payload={ \"id\": 137, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f8b282053980843b9aca0084454ec3fa831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c080a09d7c4192342ae865243267b42569d346ed14d5ae75041c1e07a52aaea615cea2a058596ac5acae1e06af019995eb9cdad85f72d95b54ea524b5b6539d235e632eb\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T17:59:17.363Z warn: First approach failed: could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'", "txHash": "0x120477e4c12c66fa3e06b001f897076e26f74c580a478e5cdcd3953a45a5e79e" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'" }, payload={ "id": 137, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f8b282053980843b9aca0084454ec3fa831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c080a09d7c4192342ae865243267b42569d346ed14d5ae75041c1e07a52aaea615cea2a058596ac5acae1e06af019995eb9cdad85f72d95b54ea524b5b6539d235e632eb" ] }, code=UNKNOWN_ERROR, version=6.13.5). Trying with Hardhat script... {"service":"oracle-service"}
2025-04-15T17:59:17.363Z info: Executing script to add second verifier approval for token 1 {"service":"oracle-service"}
2025-04-15T17:59:17.785Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:59:17.787Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:59:17.788Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T17:59:17.811Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T17:59:17.812Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T17:59:17.813Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T17:59:17.833Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T17:59:17.839Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T17:59:17.839Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T17:59:17.839Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T17:59:17.839Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T17:59:17.840Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T17:59:17.840Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T17:59:17.840Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T17:59:17.841Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T17:59:17.842Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T17:59:17.842Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T17:59:17.843Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T17:59:17.843Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T17:59:17.864Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T17:59:17.864Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T17:59:17.864Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T17:59:17.908Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T17:59:21.903Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:00:00.893Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:00:00.896Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:00:00.910Z info: Polling for verification.VerificationRequested events from block 21 to 21 {"service":"oracle-service"}
2025-04-15T18:00:00.912Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:00:00.924Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:00:00.924Z info: Polling for moderation.ModerationActionCreated events from block 21 to 21 {"service":"oracle-service"}
2025-04-15T18:00:00.924Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:00:00.925Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:01:00.958Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:01:00.977Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:02:00.078Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:02:00.098Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:02:23.631Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:03:00.163Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:03:00.186Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:03:52.041Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:03:52.070Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:03:55.134Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:03:57.332Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:03:57.332Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T18:03:57.332Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T18:03:57Z"
} {"service":"oracle-service"}
2025-04-15T18:03:57.332Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:03:57.332Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:04:00.241Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:04:00.254Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:04:16.629Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T18:04:18.115Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:04:33.203Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:04:33.278Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T18:04:33.292Z info: Current verification level before approval: UNVERIFIED {"service":"oracle-service"}
2025-04-15T18:04:33.292Z info: Executing identity.approveVerification as second verifier with args: {"0":"1","1":2,"service":"oracle-service"}
2025-04-15T18:04:33.305Z info: Using account [object Object] as second verifier {"service":"oracle-service"}
2025-04-15T18:04:33.402Z error: Error executing identity.approveVerification as second verifier: could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'", "txHash": "0xaeac2bcd94beed522ff0c3558f2ba8bcf9a1fbc55321fc04619c3772e4700dd4" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'" }, payload={ "id": 161, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f8b282053901843b9aca008444195432831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c001a064f652133fbc4566832f6008cbb35e83946c791501b8dd75f4315537e8e16f22a011d61c67cf5df8ac8807ed08a04c25bb7f8e9fae7889a618a867e8026dfebfbd" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'","txHash":"0xaeac2bcd94beed522ff0c3558f2ba8bcf9a1fbc55321fc04619c3772e4700dd4","data":"0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f8b282053901843b9aca008444195432831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c001a064f652133fbc4566832f6008cbb35e83946c791501b8dd75f4315537e8e16f22a011d61c67cf5df8ac8807ed08a04c25bb7f8e9fae7889a618a867e8026dfebfbd"],"id":161,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'\", \"txHash\": \"0xaeac2bcd94beed522ff0c3558f2ba8bcf9a1fbc55321fc04619c3772e4700dd4\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'\" }, payload={ \"id\": 161, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f8b282053901843b9aca008444195432831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c001a064f652133fbc4566832f6008cbb35e83946c791501b8dd75f4315537e8e16f22a011d61c67cf5df8ac8807ed08a04c25bb7f8e9fae7889a618a867e8026dfebfbd\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:04:33.402Z warn: First approach failed: could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000245265717569726573206d756c7469706c6520766572696669657220617070726f76616c7300000000000000000000000000000000000000000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'", "txHash": "0xaeac2bcd94beed522ff0c3558f2ba8bcf9a1fbc55321fc04619c3772e4700dd4" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Requires multiple verifier approvals'" }, payload={ "id": 161, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f8b282053901843b9aca008444195432831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002c001a064f652133fbc4566832f6008cbb35e83946c791501b8dd75f4315537e8e16f22a011d61c67cf5df8ac8807ed08a04c25bb7f8e9fae7889a618a867e8026dfebfbd" ] }, code=UNKNOWN_ERROR, version=6.13.5). Trying with Hardhat script... {"service":"oracle-service"}
2025-04-15T18:04:33.404Z info: Executing script to add second verifier approval for token 1 {"service":"oracle-service"}
2025-04-15T18:04:33.889Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:04:33.891Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:04:33.892Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:04:33.915Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:04:33.916Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:04:33.917Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:04:33.938Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:04:33.943Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:04:33.943Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:04:33.943Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:04:33.944Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:04:33.944Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:04:33.944Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:04:33.945Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:04:33.945Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:04:33.946Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:04:33.946Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:04:33.947Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:04:33.947Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:04:33.967Z info: Current block: 22 {"service":"oracle-service"}
2025-04-15T18:04:33.967Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:04:33.967Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:04:33.992Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:04:56.079Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:05:00.988Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:05:00.990Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:05:01.004Z info: Polling for verification.VerificationRequested events from block 22 to 22 {"service":"oracle-service"}
2025-04-15T18:05:01.006Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:05:01.018Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:05:01.018Z info: Polling for moderation.ModerationActionCreated events from block 22 to 22 {"service":"oracle-service"}
2025-04-15T18:05:01.018Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:05:01.018Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:06:00.053Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:06:00.071Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:07:00.121Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:07:00.137Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:08:00.201Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:08:00.221Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:09:00.272Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:09:00.294Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:10:00.335Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:10:00.340Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:10:00.356Z info: Polling for verification.VerificationRequested events from block 22 to 22 {"service":"oracle-service"}
2025-04-15T18:10:00.357Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:10:00.368Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:10:00.368Z info: Polling for moderation.ModerationActionCreated events from block 22 to 22 {"service":"oracle-service"}
2025-04-15T18:10:00.369Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:10:00.369Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:10:51.899Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:10:51.902Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:10:51.903Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:10:51.928Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:10:51.929Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:10:51.930Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:10:51.950Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:10:51.955Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:10:51.955Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:10:51.955Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:10:51.955Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:10:51.956Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:10:51.956Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:10:51.957Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:10:51.957Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:10:51.959Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:10:51.959Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:10:51.959Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:10:51.960Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:10:51.982Z info: Current block: 22 {"service":"oracle-service"}
2025-04-15T18:10:51.982Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:10:51.982Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:10:52.017Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:11:00.981Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:11:01.004Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:11:58.139Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:11:58.142Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:11:58.142Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:11:58.166Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:11:58.167Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:11:58.168Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:11:58.189Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:11:58.195Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:11:58.195Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:11:58.195Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:11:58.195Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:11:58.195Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:11:58.196Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:11:58.196Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:11:58.197Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:11:58.198Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:11:58.198Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:11:58.199Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:11:58.199Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:11:58.221Z info: Current block: 22 {"service":"oracle-service"}
2025-04-15T18:11:58.221Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:11:58.221Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:11:58.261Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:12:00.200Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:12:00.214Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:12:50.269Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:14:35.060Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:14:35.063Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:14:35.063Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:14:35.087Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:14:35.088Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:14:35.089Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:14:35.110Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:14:35.115Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:14:35.115Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:14:35.115Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:14:35.115Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:14:35.116Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:14:35.116Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:14:35.116Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:14:35.117Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:14:35.119Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:14:35.119Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:14:35.119Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:14:35.119Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:14:35.142Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:14:35.142Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:14:35.142Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:14:35.167Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:15:00.152Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:15:00.157Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:15:00.175Z info: Polling for verification.VerificationRequested events from block 18 to 18 {"service":"oracle-service"}
2025-04-15T18:15:00.178Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:15:00.190Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:15:00.190Z info: Polling for moderation.ModerationActionCreated events from block 18 to 18 {"service":"oracle-service"}
2025-04-15T18:15:00.190Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:15:00.190Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:15:07.710Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:07.759Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:07.773Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T18:15:07Z"],"service":"oracle-service"}
2025-04-15T18:15:07.849Z info: Transaction submitted: 0x042e6e86cee6f461c8a555d39a3b2724ebdf63a2e31136991bfba4da32b986ee {"service":"oracle-service"}
2025-04-15T18:15:11.351Z info: Transaction confirmed: 0x042e6e86cee6f461c8a555d39a3b2724ebdf63a2e31136991bfba4da32b986ee, block: 19 {"service":"oracle-service"}
2025-04-15T18:15:11.351Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0x042e6e86cee6f461c8a555d39a3b2724ebdf63a2e31136991bfba4da32b986ee {"service":"oracle-service"}
2025-04-15T18:15:11.367Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:15:11.367Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:11.382Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T18:15:11.382Z","verificationLevel":"0"}
2025-04-15T18:15:16.403Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:16.432Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:22.070Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:31.420Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:15:31.420Z info: Step 1: Creating verification request in blockchain for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:15:31.420Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:15:31.421Z error: Error executing verification.requestVerification (attempt 1/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)"}
2025-04-15T18:15:31.421Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:15:36.423Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:15:36.427Z error: Error executing verification.requestVerification (attempt 2/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:15:36.428Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:15:41.429Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:15:41.432Z error: Error executing verification.requestVerification (attempt 3/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:15:41.432Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:15:46.435Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:15:46.438Z error: Error executing verification.requestVerification (attempt 4/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:15:46.439Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:15:51.440Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:15:51.444Z error: Error executing verification.requestVerification (attempt 5/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:15:51.444Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:15:56.446Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:15:56.447Z error: Error executing verification.requestVerification (attempt 6/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:15:56.447Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:00.228Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:16:00.249Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:16:01.450Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:16:01.453Z error: Error executing verification.requestVerification (attempt 7/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:16:01.453Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:06.455Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:16:06.460Z error: Error executing verification.requestVerification (attempt 8/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:16:06.460Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:11.462Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:16:11.464Z error: Error executing verification.requestVerification (attempt 9/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:16:11.464Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:16.466Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:16:16.469Z error: Error executing verification.requestVerification (attempt 10/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:16:16.469Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:21.473Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:15:31Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:16:21.477Z error: Error executing verification.requestVerification (attempt 11/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:16:21.477Z warn: Maximum retries reached, simulating successful transaction in development mode {"service":"oracle-service"}
2025-04-15T18:16:21.478Z info: Verification request created in blockchain with transaction hash: 0xc6ec6c1e072b95fa97a4bca5d4 {"service":"oracle-service"}
2025-04-15T18:16:21.478Z info: Step 2: Waiting for transaction to be processed {"service":"oracle-service"}
2025-04-15T18:16:23.479Z info: Step 3: Processing verification with KYC service {"service":"oracle-service"}
2025-04-15T18:16:23.480Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T18:16:23.480Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T18:15:31Z"
} {"service":"oracle-service"}
2025-04-15T18:16:23.480Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:16:23.480Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:16:23.950Z info: Computed verification ID: 0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101 {"service":"oracle-service"}
2025-04-15T18:16:23.950Z info: Step 4: Confirming verification in blockchain {"service":"oracle-service"}
2025-04-15T18:16:23.950Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:24.047Z error: Error executing verification.confirmVerification (attempt 1/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x80a3174a6649c89576e3e079f92c93de912498624b7b69b000c3c4ea0585ef39" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 96, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f382053913843b9aca008446a7b94a831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0fe48398397612369facccc492c73df8bb11cec96076fd48fe672339d7f338c29a04c1cf10a3221fc24b6b67c027ec9835da8182ed71b8e5929d6c4fba07f3b790c" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x80a3174a6649c89576e3e079f92c93de912498624b7b69b000c3c4ea0585ef39","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f382053913843b9aca008446a7b94a831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0fe48398397612369facccc492c73df8bb11cec96076fd48fe672339d7f338c29a04c1cf10a3221fc24b6b67c027ec9835da8182ed71b8e5929d6c4fba07f3b790c"],"id":96,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x80a3174a6649c89576e3e079f92c93de912498624b7b69b000c3c4ea0585ef39\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 96, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f382053913843b9aca008446a7b94a831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0fe48398397612369facccc492c73df8bb11cec96076fd48fe672339d7f338c29a04c1cf10a3221fc24b6b67c027ec9835da8182ed71b8e5929d6c4fba07f3b790c\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:24.048Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:29.050Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:29.129Z error: Error executing verification.confirmVerification (attempt 2/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0xf1195a2df40185e7a9a798253f1ea64e346f5e54ff8abe117cd457294cbcfaa6" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 110, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f382053914843b9aca0084454ec3fa831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0f94a18b982030348d8e2514f21f4ccee26ac564b0c4f48473d45352ced084f39a076f54881115920b5a52b890d40b85a28bc902c6cd82c7dd38e03f20f360379ed" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0xf1195a2df40185e7a9a798253f1ea64e346f5e54ff8abe117cd457294cbcfaa6","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f382053914843b9aca0084454ec3fa831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0f94a18b982030348d8e2514f21f4ccee26ac564b0c4f48473d45352ced084f39a076f54881115920b5a52b890d40b85a28bc902c6cd82c7dd38e03f20f360379ed"],"id":110,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0xf1195a2df40185e7a9a798253f1ea64e346f5e54ff8abe117cd457294cbcfaa6\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 110, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f382053914843b9aca0084454ec3fa831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0f94a18b982030348d8e2514f21f4ccee26ac564b0c4f48473d45352ced084f39a076f54881115920b5a52b890d40b85a28bc902c6cd82c7dd38e03f20f360379ed\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:29.130Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:34.131Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:34.206Z error: Error executing verification.confirmVerification (attempt 3/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x987b7165401fa22f5eb60729dc975ff84125933276a9d33e13d6becca9e2004d" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 124, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f382053915843b9aca00844418f8c0831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a00a8f7ab9c18efcca8c375e28efd3b95269366b417c9b473764c0e4da24893437a02d770ec246c5707fe4eb5f21abdb330339f06d8e52051b63f56dce807d6064ac" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x987b7165401fa22f5eb60729dc975ff84125933276a9d33e13d6becca9e2004d","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f382053915843b9aca00844418f8c0831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a00a8f7ab9c18efcca8c375e28efd3b95269366b417c9b473764c0e4da24893437a02d770ec246c5707fe4eb5f21abdb330339f06d8e52051b63f56dce807d6064ac"],"id":124,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x987b7165401fa22f5eb60729dc975ff84125933276a9d33e13d6becca9e2004d\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 124, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f382053915843b9aca00844418f8c0831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a00a8f7ab9c18efcca8c375e28efd3b95269366b417c9b473764c0e4da24893437a02d770ec246c5707fe4eb5f21abdb330339f06d8e52051b63f56dce807d6064ac\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:34.206Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:39.208Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:39.290Z error: Error executing verification.confirmVerification (attempt 4/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0xf73e882089d1e5181c5b62afda41a99f32f7f2e0195bf72713d749dcde497f9a" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 138, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f382053916843b9aca00844309d07a831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0390eaee85ee0f95cecc9ec252724a98d38d437080ca6b2114efa77d8c29ed712a058623c32a860647a2550c92749b237e97d2cf05fa9838b85863b13ec39639c7b" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0xf73e882089d1e5181c5b62afda41a99f32f7f2e0195bf72713d749dcde497f9a","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f382053916843b9aca00844309d07a831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0390eaee85ee0f95cecc9ec252724a98d38d437080ca6b2114efa77d8c29ed712a058623c32a860647a2550c92749b237e97d2cf05fa9838b85863b13ec39639c7b"],"id":138,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0xf73e882089d1e5181c5b62afda41a99f32f7f2e0195bf72713d749dcde497f9a\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 138, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f382053916843b9aca00844309d07a831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0390eaee85ee0f95cecc9ec252724a98d38d437080ca6b2114efa77d8c29ed712a058623c32a860647a2550c92749b237e97d2cf05fa9838b85863b13ec39639c7b\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:39.291Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:44.292Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:44.357Z error: Error executing verification.confirmVerification (attempt 5/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x7b513853c6b56c6fe4549f08c3b676645840ca89dac80b795d0f32fcb980d273" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 156, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f382053918843b9aca0084414cbc5c831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a03be5da14fc45e4dc03abdc7bcfac918383936afcbdb4d5e9dcfe36f26c93311ba07cf9d3ac6bd3746693b62c428718559829bd41437b2f02898dc1c6ab3231aaf8" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x7b513853c6b56c6fe4549f08c3b676645840ca89dac80b795d0f32fcb980d273","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f382053918843b9aca0084414cbc5c831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a03be5da14fc45e4dc03abdc7bcfac918383936afcbdb4d5e9dcfe36f26c93311ba07cf9d3ac6bd3746693b62c428718559829bd41437b2f02898dc1c6ab3231aaf8"],"id":156,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x7b513853c6b56c6fe4549f08c3b676645840ca89dac80b795d0f32fcb980d273\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 156, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f382053918843b9aca0084414cbc5c831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a03be5da14fc45e4dc03abdc7bcfac918383936afcbdb4d5e9dcfe36f26c93311ba07cf9d3ac6bd3746693b62c428718559829bd41437b2f02898dc1c6ab3231aaf8\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:44.357Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:49.358Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:49.423Z error: Error executing verification.confirmVerification (attempt 6/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x7d116cef39aee66b7cd73b66e3afc761957c22218c7f4e86391d6c3d89d8c064" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 170, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f382053919843b9aca0084409837d0831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0c3739cf12f0eedf3d69bff38d1a0bf34a71b750a9fdd063ae33e1ef1a78ffe3ea065e12eee827ccc2c9146457b574c70ba6d300e673ce8231a458026eeccea8ec9" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x7d116cef39aee66b7cd73b66e3afc761957c22218c7f4e86391d6c3d89d8c064","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f382053919843b9aca0084409837d0831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0c3739cf12f0eedf3d69bff38d1a0bf34a71b750a9fdd063ae33e1ef1a78ffe3ea065e12eee827ccc2c9146457b574c70ba6d300e673ce8231a458026eeccea8ec9"],"id":170,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x7d116cef39aee66b7cd73b66e3afc761957c22218c7f4e86391d6c3d89d8c064\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 170, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f382053919843b9aca0084409837d0831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0c3739cf12f0eedf3d69bff38d1a0bf34a71b750a9fdd063ae33e1ef1a78ffe3ea065e12eee827ccc2c9146457b574c70ba6d300e673ce8231a458026eeccea8ec9\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:49.423Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:54.425Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:54.498Z error: Error executing verification.confirmVerification (attempt 7/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x9f82ff36879b97b9b8b2adf25f203c139ce904cfd76ced1df3208cb2fe03b324" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 184, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f38205391a843b9aca00843ff8e6aa831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0e2b03ea7f90a8fcb5284f1268f1b862c57b47d8a8826d53d8c592ea125fedfe1a07a786b3ea7b263dde6e9688bfd84cd265f6959e4b7fe719b7308a9b861926e87" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x9f82ff36879b97b9b8b2adf25f203c139ce904cfd76ced1df3208cb2fe03b324","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f38205391a843b9aca00843ff8e6aa831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0e2b03ea7f90a8fcb5284f1268f1b862c57b47d8a8826d53d8c592ea125fedfe1a07a786b3ea7b263dde6e9688bfd84cd265f6959e4b7fe719b7308a9b861926e87"],"id":184,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x9f82ff36879b97b9b8b2adf25f203c139ce904cfd76ced1df3208cb2fe03b324\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 184, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f38205391a843b9aca00843ff8e6aa831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0e2b03ea7f90a8fcb5284f1268f1b862c57b47d8a8826d53d8c592ea125fedfe1a07a786b3ea7b263dde6e9688bfd84cd265f6959e4b7fe719b7308a9b861926e87\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:54.499Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:16:59.500Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:16:59.565Z error: Error executing verification.confirmVerification (attempt 8/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0xe59780a6fa42c8d894e524c0c6aec04d95e832504b1b1d47e35b57e87e246b0a" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 198, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f38205391b843b9aca00843f6d741e831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0379247d788e1030ef2c15352a7263a53c80d02da0882e26dc7183727b03d6141a009a1994e5324345088cf44e69f93ba9ff36e952ce853a8d5c5b1e60e0b6b914e" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0xe59780a6fa42c8d894e524c0c6aec04d95e832504b1b1d47e35b57e87e246b0a","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f38205391b843b9aca00843f6d741e831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0379247d788e1030ef2c15352a7263a53c80d02da0882e26dc7183727b03d6141a009a1994e5324345088cf44e69f93ba9ff36e952ce853a8d5c5b1e60e0b6b914e"],"id":198,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0xe59780a6fa42c8d894e524c0c6aec04d95e832504b1b1d47e35b57e87e246b0a\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 198, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f38205391b843b9aca00843f6d741e831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0379247d788e1030ef2c15352a7263a53c80d02da0882e26dc7183727b03d6141a009a1994e5324345088cf44e69f93ba9ff36e952ce853a8d5c5b1e60e0b6b914e\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:16:59.566Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:17:00.292Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:17:00.307Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:17:04.568Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:17:04.639Z error: Error executing verification.confirmVerification (attempt 9/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x52c4c46ccf1b6a29e89d1538977de6d0a9979af1d22cf926e41c44af05d037b4" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 215, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f38205391c843b9aca00843ef365c8831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a036c00b60ffd0473bd259f564d39a2beff81aa6cc386c2259f33118b45c9d8acda00ba11983d200bcd71ae76fd47a56bbcc109bd51b7a4a3dd8f2f9db3c1b063ab0" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x52c4c46ccf1b6a29e89d1538977de6d0a9979af1d22cf926e41c44af05d037b4","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f38205391c843b9aca00843ef365c8831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a036c00b60ffd0473bd259f564d39a2beff81aa6cc386c2259f33118b45c9d8acda00ba11983d200bcd71ae76fd47a56bbcc109bd51b7a4a3dd8f2f9db3c1b063ab0"],"id":215,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x52c4c46ccf1b6a29e89d1538977de6d0a9979af1d22cf926e41c44af05d037b4\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 215, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f38205391c843b9aca00843ef365c8831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a036c00b60ffd0473bd259f564d39a2beff81aa6cc386c2259f33118b45c9d8acda00ba11983d200bcd71ae76fd47a56bbcc109bd51b7a4a3dd8f2f9db3c1b063ab0\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:17:04.640Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:17:09.642Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:17:09.716Z error: Error executing verification.confirmVerification (attempt 10/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x8a68872a418ec528edaa98f1afd27e78cde07862f8d31e5f3c63cd7cb180ef0c" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 229, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f38205391d843b9aca00843e889064831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a08a48e1584fc2e5fe05f9134de78bcdd1aef8deb305f89443e505edb7d9419725a06b655aeffc9f77287e655941a183ed203b2031ce446389ae58df8bb448722738" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x8a68872a418ec528edaa98f1afd27e78cde07862f8d31e5f3c63cd7cb180ef0c","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f38205391d843b9aca00843e889064831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a08a48e1584fc2e5fe05f9134de78bcdd1aef8deb305f89443e505edb7d9419725a06b655aeffc9f77287e655941a183ed203b2031ce446389ae58df8bb448722738"],"id":229,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x8a68872a418ec528edaa98f1afd27e78cde07862f8d31e5f3c63cd7cb180ef0c\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 229, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f38205391d843b9aca00843e889064831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c001a08a48e1584fc2e5fe05f9134de78bcdd1aef8deb305f89443e505edb7d9419725a06b655aeffc9f77287e655941a183ed203b2031ce446389ae58df8bb448722738\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:17:09.716Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:17:14.717Z info: Executing verification.confirmVerification with args: {"0":"0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101","1":true,"2":"{\"verificationId\":\"kyc-1744740983480\",\"level\":2,\"timestamp\":\"2025-04-15T18:16:23.481Z\",\"expiresAt\":\"2026-04-15T18:16:23.481Z\",\"verificationSuccessful\":true,\"verificationType\":\"KYC\",\"processedAt\":\"2025-04-15T18:16:23.481Z\",\"mockProvider\":true}","service":"oracle-service"}
2025-04-15T18:17:14.790Z error: Error executing verification.confirmVerification (attempt 11/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'", "txHash": "0x5f36a65d0c806dd184b2b1625b5d9e81b2cdacc0f13d93dacdd2c3a8ca43ed9a" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'" }, payload={ "id": 243, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f901f38205391e843b9aca00843e2b0dee831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0c8c05e70dba83243bae64cf3f9daa1dd82f26b83ca7bacd6d00c173811f3e790a02d242c1d605eff1e674f76084ccebc804fe7fadf052d1b3cfa16ca39f74027bd" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'","txHash":"0x5f36a65d0c806dd184b2b1625b5d9e81b2cdacc0f13d93dacdd2c3a8ca43ed9a","data":"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f901f38205391e843b9aca00843e2b0dee831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0c8c05e70dba83243bae64cf3f9daa1dd82f26b83ca7bacd6d00c173811f3e790a02d242c1d605eff1e674f76084ccebc804fe7fadf052d1b3cfa16ca39f74027bd"],"id":243,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000016566572696669636174696f6e206e6f7420666f756e6400000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\", \"txHash\": \"0x5f36a65d0c806dd184b2b1625b5d9e81b2cdacc0f13d93dacdd2c3a8ca43ed9a\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Verification not found'\" }, payload={ \"id\": 243, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f901f38205391e843b9aca00843e2b0dee831e848094cf7ed3acca5a467e9e704c703e8d87f634fb0fc980b90184f9df75f314e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d1010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f27b22766572696669636174696f6e4964223a226b79632d31373434373430393833343830222c226c6576656c223a322c2274696d657374616d70223a22323032352d30342d31355431383a31363a32332e3438315a222c22657870697265734174223a22323032362d30342d31355431383a31363a32332e3438315a222c22766572696669636174696f6e5375636365737366756c223a747275652c22766572696669636174696f6e54797065223a224b5943222c2270726f6365737365644174223a22323032352d30342d31355431383a31363a32332e3438315a222c226d6f636b50726f7669646572223a747275657d0000000000000000000000000000c080a0c8c05e70dba83243bae64cf3f9daa1dd82f26b83ca7bacd6d00c173811f3e790a02d242c1d605eff1e674f76084ccebc804fe7fadf052d1b3cfa16ca39f74027bd\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:17:14.791Z warn: Maximum retries reached, simulating successful transaction in development mode {"service":"oracle-service"}
2025-04-15T18:17:14.791Z info: Verification confirmed in blockchain with transaction hash: 0x42360fefee333c30694d6b1f3c {"service":"oracle-service"}
2025-04-15T18:17:14.804Z info: Step 5: Approving verification for token ID 1 to BASIC_VERIFIED level {"service":"oracle-service"}
2025-04-15T18:17:14.804Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:17:14.855Z error: Error executing identity.approveVerification (attempt 1/11): nonce has already been used (transaction="0x02f8b28205391e843b9aca00843e2b0dee831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c001a0da6bbbf31adbd99630d8ca74ec95cb18f51cc1f6f2a689b0542c69e4916d5a4ba07c407348a12995f151e58de794708267006f7424ff669be876ae081eeab9e3ac", info={ "error": { "code": -32000, "data": { "data": null, "message": "Nonce too low. Expected nonce to be 31 but got 30. Note that transactions can't be queued when automining." }, "message": "Nonce too low. Expected nonce to be 31 but got 30. Note that transactions can't be queued when automining." } }, code=NONCE_EXPIRED, version=6.13.5) {"service":"oracle-service","code":"NONCE_EXPIRED","transaction":"0x02f8b28205391e843b9aca00843e2b0dee831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c001a0da6bbbf31adbd99630d8ca74ec95cb18f51cc1f6f2a689b0542c69e4916d5a4ba07c407348a12995f151e58de794708267006f7424ff669be876ae081eeab9e3ac","info":{"error":{"code":-32000,"message":"Nonce too low. Expected nonce to be 31 but got 30. Note that transactions can't be queued when automining.","data":{"message":"Nonce too low. Expected nonce to be 31 but got 30. Note that transactions can't be queued when automining.","data":null}}},"shortMessage":"nonce has already been used","stack":"Error: nonce has already been used (transaction=\"0x02f8b28205391e843b9aca00843e2b0dee831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c001a0da6bbbf31adbd99630d8ca74ec95cb18f51cc1f6f2a689b0542c69e4916d5a4ba07c407348a12995f151e58de794708267006f7424ff669be876ae081eeab9e3ac\", info={ \"error\": { \"code\": -32000, \"data\": { \"data\": null, \"message\": \"Nonce too low. Expected nonce to be 31 but got 30. Note that transactions can't be queued when automining.\" }, \"message\": \"Nonce too low. Expected nonce to be 31 but got 30. Note that transactions can't be queued when automining.\" } }, code=NONCE_EXPIRED, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:707:49)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:17:14.855Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:17:19.857Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:17:19.933Z error: Error executing identity.approveVerification (attempt 2/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002343616e206f6e6c79207570677261646520766572696669636174696f6e206c6576656c0000000000000000000000000000000000000000000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'", "txHash": "0x6d42b5cbc32219f042560fed040f59b733936f3087ddb64aa820212e71572082" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'" }, payload={ "id": 264, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f8b28205391f843b9aca00843dd93500831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c080a03f61f214a376eb732f239f1ee3331fb1575ecb1398ef3f7f82bd848290e68e80a05c6696e97faea6f929b1602cada3eded6779568919af7c4ad801a2f9a34a8908" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'","txHash":"0x6d42b5cbc32219f042560fed040f59b733936f3087ddb64aa820212e71572082","data":"0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002343616e206f6e6c79207570677261646520766572696669636174696f6e206c6576656c0000000000000000000000000000000000000000000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f8b28205391f843b9aca00843dd93500831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c080a03f61f214a376eb732f239f1ee3331fb1575ecb1398ef3f7f82bd848290e68e80a05c6696e97faea6f929b1602cada3eded6779568919af7c4ad801a2f9a34a8908"],"id":264,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002343616e206f6e6c79207570677261646520766572696669636174696f6e206c6576656c0000000000000000000000000000000000000000000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'\", \"txHash\": \"0x6d42b5cbc32219f042560fed040f59b733936f3087ddb64aa820212e71572082\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'\" }, payload={ \"id\": 264, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f8b28205391f843b9aca00843dd93500831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c080a03f61f214a376eb732f239f1ee3331fb1575ecb1398ef3f7f82bd848290e68e80a05c6696e97faea6f929b1602cada3eded6779568919af7c4ad801a2f9a34a8908\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:17:19.934Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:17:24.935Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:17:25.004Z error: Error executing identity.approveVerification (attempt 3/11): could not coalesce error (error={ "code": -32603, "data": { "data": "0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002343616e206f6e6c79207570677261646520766572696669636174696f6e206c6576656c0000000000000000000000000000000000000000000000000000000000", "message": "Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'", "txHash": "0x79ea65c0b4d5cce34c772b70d04d91f0e7ef24c83cfe08e1b7d02f00fac68896" }, "message": "Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'" }, payload={ "id": 279, "jsonrpc": "2.0", "method": "eth_sendRawTransaction", "params": [ "0x02f8b282053920843b9aca00843d919142831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c001a0e64f89f7267c50efad16388c7b060fc9e3bd3335a884121551a0df4042bbe7f5a06c13f9b4f77845f545f67bb93aa2f2a00d688b8e2710477896162ad247a0bc73" ] }, code=UNKNOWN_ERROR, version=6.13.5) {"service":"oracle-service","code":"UNKNOWN_ERROR","error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'","data":{"message":"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'","txHash":"0x79ea65c0b4d5cce34c772b70d04d91f0e7ef24c83cfe08e1b7d02f00fac68896","data":"0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002343616e206f6e6c79207570677261646520766572696669636174696f6e206c6576656c0000000000000000000000000000000000000000000000000000000000"}},"payload":{"method":"eth_sendRawTransaction","params":["0x02f8b282053920843b9aca00843d919142831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c001a0e64f89f7267c50efad16388c7b060fc9e3bd3335a884121551a0df4042bbe7f5a06c13f9b4f77845f545f67bb93aa2f2a00d688b8e2710477896162ad247a0bc73"],"id":279,"jsonrpc":"2.0"},"shortMessage":"could not coalesce error","stack":"Error: could not coalesce error (error={ \"code\": -32603, \"data\": { \"data\": \"0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002343616e206f6e6c79207570677261646520766572696669636174696f6e206c6576656c0000000000000000000000000000000000000000000000000000000000\", \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'\", \"txHash\": \"0x79ea65c0b4d5cce34c772b70d04d91f0e7ef24c83cfe08e1b7d02f00fac68896\" }, \"message\": \"Error: VM Exception while processing transaction: reverted with reason string 'Can only upgrade verification level'\" }, payload={ \"id\": 279, \"jsonrpc\": \"2.0\", \"method\": \"eth_sendRawTransaction\", \"params\": [ \"0x02f8b282053920843b9aca00843d919142831e8480945fbdb2315678afecb367f032d93f642f64180aa380b844e96bc10d00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001c001a0e64f89f7267c50efad16388c7b060fc9e3bd3335a884121551a0df4042bbe7f5a06c13f9b4f77845f545f67bb93aa2f2a00d688b8e2710477896162ad247a0bc73\" ] }, code=UNKNOWN_ERROR, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at JsonRpcProvider.getRpcError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:730:41)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/provider-jsonrpc.js:302:45\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:17:25.004Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:17:29.245Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:18:04.281Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:18:04.284Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:18:04.284Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:18:04.308Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:18:04.309Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:18:04.309Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:18:04.331Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:18:04.336Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:18:04.336Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:18:04.336Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:18:04.336Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:18:04.336Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:18:04.337Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:18:04.337Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:18:04.338Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:18:04.339Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:18:04.339Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:18:04.340Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:18:04.340Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:18:04.362Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:18:04.362Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:18:04.362Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:18:04.387Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:18:47.384Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:18:47.386Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:18:47.387Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:18:47.412Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:18:47.412Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:18:47.413Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:18:47.433Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:18:47.439Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:18:47.439Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:18:47.439Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:18:47.439Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:18:47.439Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:18:47.440Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:18:47.440Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:18:47.440Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:18:47.442Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:18:47.442Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:18:47.442Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:18:47.443Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:18:47.464Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:18:47.464Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:18:47.464Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:18:47.490Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:19:00.459Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:19:00.473Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:19:19.646Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:19.689Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:19.703Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T18:19:19Z"],"service":"oracle-service"}
2025-04-15T18:19:19.780Z info: Transaction submitted: 0x2e7e5b2d3e07483a7033ab9780bd1074b4249f82f23e1a4b836aba189f88b041 {"service":"oracle-service"}
2025-04-15T18:19:23.674Z info: Transaction confirmed: 0x2e7e5b2d3e07483a7033ab9780bd1074b4249f82f23e1a4b836aba189f88b041, block: 19 {"service":"oracle-service"}
2025-04-15T18:19:23.674Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0x2e7e5b2d3e07483a7033ab9780bd1074b4249f82f23e1a4b836aba189f88b041 {"service":"oracle-service"}
2025-04-15T18:19:23.688Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:19:23.689Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:23.703Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T18:19:23.703Z","verificationLevel":"0"}
2025-04-15T18:19:28.729Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:28.758Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:35.114Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:35.646Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:37.943Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:40.418Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:19:40.419Z info: Step 1: Creating verification request in blockchain for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:19:40.419Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:19:40.420Z error: Error executing verification.requestVerification (attempt 1/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)"}
2025-04-15T18:19:40.420Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:19:45.422Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:19:45.425Z error: Error executing verification.requestVerification (attempt 2/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:19:45.425Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:19:50.428Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:19:50.431Z error: Error executing verification.requestVerification (attempt 3/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:19:50.431Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:19:55.433Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:19:55.435Z error: Error executing verification.requestVerification (attempt 4/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:19:55.435Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:20:00.436Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:20:00.438Z error: Error executing verification.requestVerification (attempt 5/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:20:00.438Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:20:00.527Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:20:00.528Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:20:00.540Z info: Polling for verification.VerificationRequested events from block 18 to 19 {"service":"oracle-service"}
2025-04-15T18:20:00.541Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:20:00.553Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:20:00.553Z info: Polling for moderation.ModerationActionCreated events from block 19 to 19 {"service":"oracle-service"}
2025-04-15T18:20:00.553Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:20:00.553Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:20:05.439Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:20:05.440Z error: Error executing verification.requestVerification (attempt 6/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:20:05.440Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:20:09.542Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:20:09.542Z info: Stopping Oracle Service {"service":"oracle-service"}
2025-04-15T18:20:09.542Z info: Oracle Service stopped {"service":"oracle-service"}
2025-04-15T18:20:10.443Z info: Executing verification.requestVerification with args: {"0":0,"1":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:19:40Z\"}","2":"0x","service":"oracle-service"}
2025-04-15T18:20:10.449Z error: Error executing verification.requestVerification (attempt 7/11): transaction from mismatch (argument="tx.from", value="0x70997970C51812dc3A010C7d01b50e0d17dc79C8", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service","code":"INVALID_ARGUMENT","argument":"tx.from","value":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","shortMessage":"transaction from mismatch","stack":"TypeError: transaction from mismatch (argument=\"tx.from\", value=\"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", code=INVALID_ARGUMENT, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:122:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at assertArgument (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:161:5)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:32:43\n    at async Promise.all (index 1)\n    at async resolveProperties (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/properties.js:36:21)\n    at async populate (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:39:12)\n    at async Wallet.populateTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:67:21)\n    at async Wallet.sendTransaction (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/providers/abstract-signer.js:182:21)\n    at async send (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:228:20)"}
2025-04-15T18:20:10.451Z info: Retrying in 5000ms... {"service":"oracle-service"}
2025-04-15T18:20:12.367Z info: HTTP server closed {"service":"oracle-service"}
2025-04-15T18:22:52.114Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:22:52.116Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:22:52.116Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:22:52.141Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:22:52.141Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:22:52.142Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:22:52.164Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:22:52.170Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:22:52.170Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:22:52.170Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:22:52.170Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:22:52.170Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:22:52.171Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:22:52.171Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:22:52.171Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:22:52.173Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:22:52.173Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:22:52.173Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:22:52.174Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:22:52.201Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:22:52.202Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:22:52.202Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:22:52.228Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:23:00.185Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:23:00.204Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:23:29.490Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:29.543Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:29.557Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T18:23:29Z"],"service":"oracle-service"}
2025-04-15T18:23:29.634Z info: Transaction submitted: 0xb97dcaf708e88ddf8b03bc6a78f2634bb5e8d52c04fe857a8a0e35c95ae95d95 {"service":"oracle-service"}
2025-04-15T18:23:32.465Z info: Transaction confirmed: 0xb97dcaf708e88ddf8b03bc6a78f2634bb5e8d52c04fe857a8a0e35c95ae95d95, block: 19 {"service":"oracle-service"}
2025-04-15T18:23:32.466Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0xb97dcaf708e88ddf8b03bc6a78f2634bb5e8d52c04fe857a8a0e35c95ae95d95 {"service":"oracle-service"}
2025-04-15T18:23:32.483Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:23:32.484Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:32.499Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T18:23:32.499Z","verificationLevel":"0"}
2025-04-15T18:23:37.521Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:37.549Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:50.174Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:51.635Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:23:51.635Z info: Step 1: Directly verifying the user 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 using Oracle's VERIFIER_ROLE {"service":"oracle-service"}
2025-04-15T18:23:51.635Z info: Step 1a: Processing verification with KYC service {"service":"oracle-service"}
2025-04-15T18:23:51.636Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T18:23:51.636Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T18:23:51Z"
} {"service":"oracle-service"}
2025-04-15T18:23:51.636Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:51.636Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:23:52.101Z info: KYC verification successful: {"success":true,"data":{"verificationId":"kyc-1744741431636","level":2,"timestamp":"2025-04-15T18:23:51.636Z","expiresAt":"2026-04-15T18:23:51.636Z","verificationSuccessful":true,"verificationType":"KYC","processedAt":"2025-04-15T18:23:51.636Z","mockProvider":true},"reason":""} {"service":"oracle-service"}
2025-04-15T18:23:52.102Z info: Step 2: Directly calling verify method in VerificationRegistry contract {"service":"oracle-service"}
2025-04-15T18:23:52.103Z info: Executing verification.verify with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":0,"2":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:23:51Z\"}","3":"0x","service":"oracle-service"}
2025-04-15T18:23:52.187Z info: Transaction submitted: 0xbf924ca019d26aa925bb58a8c92a608ca4c1172682ca220e07f115eead1772b7 {"service":"oracle-service"}
2025-04-15T18:23:52.590Z info: Transaction confirmed: 0xbf924ca019d26aa925bb58a8c92a608ca4c1172682ca220e07f115eead1772b7, block: 20 {"service":"oracle-service"}
2025-04-15T18:23:52.590Z info: Address verified in blockchain with transaction hash: 0xbf924ca019d26aa925bb58a8c92a608ca4c1172682ca220e07f115eead1772b7 {"service":"oracle-service"}
2025-04-15T18:23:52.590Z info: Step 3: Waiting for verification transaction to be processed {"service":"oracle-service"}
2025-04-15T18:23:54.593Z info: Verification ID: 0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101 {"service":"oracle-service"}
2025-04-15T18:23:54.606Z info: Got token ID for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: 1 {"service":"oracle-service"}
2025-04-15T18:23:54.606Z info: Step 5: Approving verification for token ID 1 to BASIC_VERIFIED level {"service":"oracle-service"}
2025-04-15T18:23:54.606Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:23:54.675Z info: Transaction submitted: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:23:56.631Z info: Transaction confirmed: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0, block: 21 {"service":"oracle-service"}
2025-04-15T18:23:56.631Z info: DigitalIdentityNFT verification approved with transaction hash: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:23:56.649Z info: Current verification level after approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:24:00.290Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:24:00.310Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:25:00.366Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:25:00.370Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:25:00.384Z info: Polling for verification.VerificationRequested events from block 18 to 21 {"service":"oracle-service"}
2025-04-15T18:25:00.386Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:25:00.400Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:25:00.400Z info: Polling for moderation.ModerationActionCreated events from block 21 to 21 {"service":"oracle-service"}
2025-04-15T18:25:00.400Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:25:00.400Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:25:08.163Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T18:25:15.439Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:25:19.093Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T18:25:19.111Z info: Current verification level before approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:25:19.124Z info: Token 1 owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:25:19.137Z info: Current verification count: 1 {"service":"oracle-service"}
2025-04-15T18:25:19.138Z info: Executing script to add second verifier approval for token 1 {"service":"oracle-service"}
2025-04-15T18:25:19.580Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:25:19.582Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:25:19.583Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:25:19.606Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:25:19.607Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:25:19.608Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:25:19.628Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:25:19.634Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:25:19.634Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:25:19.634Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:25:19.635Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:25:19.635Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:25:19.635Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:25:19.635Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:25:19.636Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:25:19.637Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:25:19.637Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:25:19.638Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:25:19.638Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:25:19.659Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T18:25:19.659Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:25:19.659Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:25:19.685Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:25:24.186Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:25:55.303Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:26:00.692Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:26:00.706Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:27:00.759Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:27:00.773Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:27:25.572Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:27:26.586Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:27:35.490Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:27:39.391Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:27:39.393Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:27:39.394Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:27:39.418Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:27:39.419Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:27:39.420Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:27:39.444Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:27:39.449Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:27:39.449Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:27:39.450Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:27:39.450Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:27:39.450Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:27:39.450Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:27:39.451Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:27:39.451Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:27:39.453Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:27:39.453Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:27:39.453Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:27:39.454Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:27:39.479Z info: Current block: 0 {"service":"oracle-service"}
2025-04-15T18:27:39.479Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:27:39.479Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:27:39.492Z warn: Could not check oracle permissions: could not decode result data (value="0x", info={ "method": "VERIFIER_ROLE", "signature": "VERIFIER_ROLE()" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:27:51.007Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:27:51.032Z error: Error fetching verification level: could not decode result data (value="0x", info={ "method": "hasIdentity", "signature": "hasIdentity(address)" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service","code":"BAD_DATA","value":"0x","info":{"method":"hasIdentity","signature":"hasIdentity(address)"},"shortMessage":"could not decode result data","stack":"Error: could not decode result data (value=\"0x\", info={ \"method\": \"hasIdentity\", \"signature\": \"hasIdentity(address)\" }, code=BAD_DATA, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at Interface.decodeFunctionResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/abi/interface.js:780:31)\n    at staticCallResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:254:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async staticCall (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:219:24)\n    at async Proxy.hasIdentity (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:259:20)\n    at async /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/identity.controller.js:109:25"}
2025-04-15T18:28:00.483Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:28:00.504Z error: Error checking pending verifications: could not decode result data (value="0x", info={ "method": "getPendingVerificationIds", "signature": "getPendingVerificationIds()" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service","code":"BAD_DATA","value":"0x","info":{"method":"getPendingVerificationIds","signature":"getPendingVerificationIds()"},"shortMessage":"could not decode result data","stack":"Error: could not decode result data (value=\"0x\", info={ \"method\": \"getPendingVerificationIds\", \"signature\": \"getPendingVerificationIds()\" }, code=BAD_DATA, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at Interface.decodeFunctionResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/abi/interface.js:780:31)\n    at staticCallResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:254:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async staticCall (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:219:24)\n    at async Proxy.getPendingVerificationIds (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:259:20)\n    at async OracleService.checkPendingVerifications (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/services/oracle.service.js:522:32)"}
2025-04-15T18:28:01.389Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:28:01.403Z error: Error fetching identity details: could not decode result data (value="0x", info={ "method": "hasIdentity", "signature": "hasIdentity(address)" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service","code":"BAD_DATA","value":"0x","info":{"method":"hasIdentity","signature":"hasIdentity(address)"},"shortMessage":"could not decode result data","stack":"Error: could not decode result data (value=\"0x\", info={ \"method\": \"hasIdentity\", \"signature\": \"hasIdentity(address)\" }, code=BAD_DATA, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at Interface.decodeFunctionResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/abi/interface.js:780:31)\n    at staticCallResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:254:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async staticCall (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:219:24)\n    at async Proxy.hasIdentity (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:259:20)\n    at async /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/identity.controller.js:25:25"}
2025-04-15T18:28:01.428Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:28:01.441Z error: Error creating identity: could not decode result data (value="0x", info={ "method": "hasIdentity", "signature": "hasIdentity(address)" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service","code":"BAD_DATA","value":"0x","info":{"method":"hasIdentity","signature":"hasIdentity(address)"},"shortMessage":"could not decode result data","stack":"Error: could not decode result data (value=\"0x\", info={ \"method\": \"hasIdentity\", \"signature\": \"hasIdentity(address)\" }, code=BAD_DATA, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at Interface.decodeFunctionResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/abi/interface.js:780:31)\n    at staticCallResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:254:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async staticCall (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:219:24)\n    at async Proxy.hasIdentity (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:259:20)\n    at async /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/identity.controller.js:177:25"}
2025-04-15T18:28:06.476Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:28:06.491Z error: Error fetching identity details: could not decode result data (value="0x", info={ "method": "hasIdentity", "signature": "hasIdentity(address)" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service","code":"BAD_DATA","value":"0x","info":{"method":"hasIdentity","signature":"hasIdentity(address)"},"shortMessage":"could not decode result data","stack":"Error: could not decode result data (value=\"0x\", info={ \"method\": \"hasIdentity\", \"signature\": \"hasIdentity(address)\" }, code=BAD_DATA, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at Interface.decodeFunctionResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/abi/interface.js:780:31)\n    at staticCallResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:254:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async staticCall (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:219:24)\n    at async Proxy.hasIdentity (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:259:20)\n    at async /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/identity.controller.js:25:25"}
2025-04-15T18:28:16.535Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:28:16.550Z error: Error fetching identity details: could not decode result data (value="0x", info={ "method": "hasIdentity", "signature": "hasIdentity(address)" }, code=BAD_DATA, version=6.13.5) {"service":"oracle-service","code":"BAD_DATA","value":"0x","info":{"method":"hasIdentity","signature":"hasIdentity(address)"},"shortMessage":"could not decode result data","stack":"Error: could not decode result data (value=\"0x\", info={ \"method\": \"hasIdentity\", \"signature\": \"hasIdentity(address)\" }, code=BAD_DATA, version=6.13.5)\n    at makeError (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:129:21)\n    at assert (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/utils/errors.js:149:15)\n    at Interface.decodeFunctionResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/abi/interface.js:780:31)\n    at staticCallResult (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:254:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async staticCall (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:219:24)\n    at async Proxy.hasIdentity (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/ethers/lib.commonjs/contract/contract.js:259:20)\n    at async /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/identity.controller.js:25:25"}
2025-04-15T18:28:27.790Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:29:43.340Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:29:43.342Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:29:43.342Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:29:43.366Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:29:43.367Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:29:43.368Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:29:43.389Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:29:43.395Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:29:43.395Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:29:43.395Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:29:43.395Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:29:43.395Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:29:43.396Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:29:43.396Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:29:43.396Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:29:43.398Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:29:43.398Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:29:43.398Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:29:43.399Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:29:43.420Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:29:43.421Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:29:43.421Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:29:43.445Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:30:00.422Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:30:00.424Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:30:00.441Z info: Polling for verification.VerificationRequested events from block 18 to 18 {"service":"oracle-service"}
2025-04-15T18:30:00.441Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:30:00.455Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:30:00.455Z info: Polling for moderation.ModerationActionCreated events from block 18 to 18 {"service":"oracle-service"}
2025-04-15T18:30:00.455Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:30:00.455Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:30:00.742Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:30:00.786Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:30:00.800Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T18:30:00Z"],"service":"oracle-service"}
2025-04-15T18:30:00.876Z info: Transaction submitted: 0xda86b5bb1e562f1f202a4d42509a8dac81266c2786cb07726bd01459b006949d {"service":"oracle-service"}
2025-04-15T18:30:03.549Z info: Transaction confirmed: 0xda86b5bb1e562f1f202a4d42509a8dac81266c2786cb07726bd01459b006949d, block: 19 {"service":"oracle-service"}
2025-04-15T18:30:03.550Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0xda86b5bb1e562f1f202a4d42509a8dac81266c2786cb07726bd01459b006949d {"service":"oracle-service"}
2025-04-15T18:30:03.565Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:30:03.565Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:30:03.582Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T18:30:03.582Z","verificationLevel":"0"}
2025-04-15T18:30:08.612Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:30:08.639Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:31:00.510Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:31:00.530Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:31:07.869Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:31:15.204Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:31:15.204Z info: Step 1: Directly verifying the user 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 using Oracle's VERIFIER_ROLE {"service":"oracle-service"}
2025-04-15T18:31:15.204Z info: Step 1a: Processing verification with KYC service {"service":"oracle-service"}
2025-04-15T18:31:15.205Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T18:31:15.205Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T18:31:15Z"
} {"service":"oracle-service"}
2025-04-15T18:31:15.205Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:31:15.206Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:31:15.664Z info: KYC verification successful: {"success":true,"data":{"verificationId":"kyc-1744741875206","level":2,"timestamp":"2025-04-15T18:31:15.206Z","expiresAt":"2026-04-15T18:31:15.207Z","verificationSuccessful":true,"verificationType":"KYC","processedAt":"2025-04-15T18:31:15.207Z","mockProvider":true},"reason":""} {"service":"oracle-service"}
2025-04-15T18:31:15.665Z info: Step 2: Directly calling verify method in VerificationRegistry contract {"service":"oracle-service"}
2025-04-15T18:31:15.666Z info: Executing verification.verify with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":0,"2":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:31:15Z\"}","3":"0x","service":"oracle-service"}
2025-04-15T18:31:15.749Z info: Transaction submitted: 0xec7a5aa04c824965738a7246790f07061e6c452c58bfa0562f59bc7706fd4927 {"service":"oracle-service"}
2025-04-15T18:31:19.941Z info: Transaction confirmed: 0xec7a5aa04c824965738a7246790f07061e6c452c58bfa0562f59bc7706fd4927, block: 20 {"service":"oracle-service"}
2025-04-15T18:31:19.942Z info: Address verified in blockchain with transaction hash: 0xec7a5aa04c824965738a7246790f07061e6c452c58bfa0562f59bc7706fd4927 {"service":"oracle-service"}
2025-04-15T18:31:19.942Z info: Step 3: Waiting for verification transaction to be processed {"service":"oracle-service"}
2025-04-15T18:31:21.946Z info: Verification ID: 0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101 {"service":"oracle-service"}
2025-04-15T18:31:21.962Z info: Got token ID for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: 1 {"service":"oracle-service"}
2025-04-15T18:31:21.962Z info: Step 5: Approving verification for token ID 1 to BASIC_VERIFIED level {"service":"oracle-service"}
2025-04-15T18:31:21.962Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:31:22.038Z info: Transaction submitted: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:31:23.984Z info: Transaction confirmed: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0, block: 21 {"service":"oracle-service"}
2025-04-15T18:31:23.984Z info: DigitalIdentityNFT verification approved with transaction hash: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:31:24.001Z info: Current verification level after approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:31:34.906Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T18:31:39.694Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:31:43.439Z info: Adding second verifier approval for token 1, level 2 {"service":"oracle-service"}
2025-04-15T18:31:43.456Z info: Current verification level before approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:31:43.469Z info: Token 1 owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:31:43.482Z info: Current verification count: 1 {"service":"oracle-service"}
2025-04-15T18:31:43.486Z info: Executing script to add second verifier approval for token 1 {"service":"oracle-service"}
2025-04-15T18:31:43.948Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:31:43.950Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:31:43.951Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:31:43.974Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:31:43.975Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:31:43.976Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:31:43.996Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:31:44.001Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:31:44.001Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:31:44.002Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:31:44.002Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:31:44.002Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:31:44.003Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:31:44.003Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:31:44.003Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:31:44.005Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:31:44.005Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:31:44.005Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:31:44.006Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:31:44.027Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T18:31:44.027Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:31:44.027Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:31:44.052Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:32:00.032Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:32:00.053Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:33:00.118Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:33:00.141Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:33:53.086Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:33:53.088Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:33:53.089Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:33:53.113Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:33:53.113Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:33:53.114Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:33:53.135Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:33:53.140Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:33:53.140Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:33:53.140Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:33:53.140Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:33:53.140Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:33:53.141Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:33:53.141Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:33:53.142Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:33:53.143Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:33:53.143Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:33:53.144Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:33:53.144Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:33:53.167Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T18:33:53.167Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:33:53.167Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:33:53.192Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:34:00.155Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:34:00.178Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:35:00.230Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:35:00.235Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:35:00.249Z info: Polling for verification.VerificationRequested events from block 21 to 21 {"service":"oracle-service"}
2025-04-15T18:35:00.251Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:35:00.264Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:35:00.264Z info: Polling for moderation.ModerationActionCreated events from block 21 to 21 {"service":"oracle-service"}
2025-04-15T18:35:00.265Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:35:00.265Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:35:11.625Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:11.628Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:11.628Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:11.662Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:35:11.663Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:35:11.663Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:35:11.685Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:35:11.691Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:35:11.691Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:35:11.692Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:35:11.692Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:35:11.692Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:35:11.693Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:35:11.693Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:35:11.693Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:35:11.695Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:35:11.695Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:35:11.695Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:35:11.696Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:35:11.718Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T18:35:11.718Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:35:11.718Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:35:11.745Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:35:19.242Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:19.244Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:19.244Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:19.269Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:35:19.270Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:35:19.271Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:35:19.291Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:35:19.296Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:35:19.296Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:35:19.296Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:35:19.297Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:35:19.297Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:35:19.297Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:35:19.298Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:35:19.298Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:35:19.300Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:35:19.300Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:35:19.300Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:35:19.300Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:35:19.321Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T18:35:19.321Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:35:19.321Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:35:19.348Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:35:32.567Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:32.569Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:32.570Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:35:32.594Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:35:32.595Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:35:32.595Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:35:32.615Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:35:32.620Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:35:32.620Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:35:32.621Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:35:32.621Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:35:32.621Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:35:32.621Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:35:32.622Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:35:32.622Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:35:32.624Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:35:32.624Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:35:32.624Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:35:32.624Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:35:32.647Z info: Current block: 21 {"service":"oracle-service"}
2025-04-15T18:35:32.647Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:35:32.647Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:35:32.674Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:36:00.656Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:36:00.672Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:36:18.490Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:37:24.099Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:37:24.101Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:37:24.101Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:37:24.125Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:37:24.126Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:37:24.127Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:37:24.149Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:37:24.156Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:37:24.156Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:37:24.156Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:37:24.156Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:37:24.157Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:37:24.157Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:37:24.157Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:37:24.158Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:37:24.159Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:37:24.159Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:37:24.160Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:37:24.160Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:37:24.183Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:37:24.183Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:37:24.183Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:37:24.208Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:37:38.346Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:37:38.392Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:37:38.406Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T18:37:38Z"],"service":"oracle-service"}
2025-04-15T18:37:38.483Z info: Transaction submitted: 0xb55522a0410395f8a9455d6aeca4efe41e24ef5b3a51c5c98815e5e44aa5ef7e {"service":"oracle-service"}
2025-04-15T18:37:38.497Z info: Transaction confirmed: 0xb55522a0410395f8a9455d6aeca4efe41e24ef5b3a51c5c98815e5e44aa5ef7e, block: 19 {"service":"oracle-service"}
2025-04-15T18:37:38.497Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0xb55522a0410395f8a9455d6aeca4efe41e24ef5b3a51c5c98815e5e44aa5ef7e {"service":"oracle-service"}
2025-04-15T18:37:40.310Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:37:40.310Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:37:40.325Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T18:37:40.325Z","verificationLevel":"0"}
2025-04-15T18:37:43.546Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:37:43.576Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:38:00.215Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:38:00.231Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:38:19.240Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:38:21.878Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:38:21.879Z info: Step 1: Directly verifying the user 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 using Oracle's VERIFIER_ROLE {"service":"oracle-service"}
2025-04-15T18:38:21.879Z info: Step 1a: Processing verification with KYC service {"service":"oracle-service"}
2025-04-15T18:38:21.879Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T18:38:21.879Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T18:38:21Z"
} {"service":"oracle-service"}
2025-04-15T18:38:21.879Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:38:21.879Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:38:22.133Z info: KYC verification successful: {"success":true,"data":{"verificationId":"kyc-1744742301879","level":2,"timestamp":"2025-04-15T18:38:21.879Z","expiresAt":"2026-04-15T18:38:21.879Z","verificationSuccessful":true,"verificationType":"KYC","processedAt":"2025-04-15T18:38:21.879Z","mockProvider":true},"reason":""} {"service":"oracle-service"}
2025-04-15T18:38:22.134Z info: Step 2: Directly calling verify method in VerificationRegistry contract {"service":"oracle-service"}
2025-04-15T18:38:22.134Z info: Executing verification.verify with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":0,"2":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:38:21Z\"}","3":"0x","service":"oracle-service"}
2025-04-15T18:38:22.221Z info: Transaction submitted: 0x778bd8097347d53b7dc93c519bfe7ea6826e3b463cf64ca4040935c50bbf3488 {"service":"oracle-service"}
2025-04-15T18:38:24.538Z info: Transaction confirmed: 0x778bd8097347d53b7dc93c519bfe7ea6826e3b463cf64ca4040935c50bbf3488, block: 20 {"service":"oracle-service"}
2025-04-15T18:38:24.538Z info: Address verified in blockchain with transaction hash: 0x778bd8097347d53b7dc93c519bfe7ea6826e3b463cf64ca4040935c50bbf3488 {"service":"oracle-service"}
2025-04-15T18:38:24.538Z info: Step 3: Waiting for verification transaction to be processed {"service":"oracle-service"}
2025-04-15T18:38:26.545Z info: Verification ID: 0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101 {"service":"oracle-service"}
2025-04-15T18:38:26.562Z info: Got token ID for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: 1 {"service":"oracle-service"}
2025-04-15T18:38:26.562Z info: Step 5: Approving verification for token ID 1 to BASIC_VERIFIED level {"service":"oracle-service"}
2025-04-15T18:38:26.562Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:38:26.637Z info: Transaction submitted: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:38:28.582Z info: Transaction confirmed: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0, block: 21 {"service":"oracle-service"}
2025-04-15T18:38:28.582Z info: DigitalIdentityNFT verification approved with transaction hash: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:38:28.599Z info: Current verification level after approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:38:40.920Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T18:38:44.459Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:38:52.380Z info: Adding second verifier approval for token 1, level 2 - DIRECT METHOD {"service":"oracle-service"}
2025-04-15T18:38:52.396Z info: Current verification level before approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:38:52.409Z info: Current verification count: 1 {"service":"oracle-service"}
2025-04-15T18:38:52.423Z info: VERIFIER_ROLE hash: 0x0ce23c3e399818cfee81a7ab0880f714e53d7672b08df0fa62f2843416e1ea09 {"service":"oracle-service"}
2025-04-15T18:38:52.423Z info: Using second verifier private key (truncated): 0x5de4111a... {"service":"oracle-service"}
2025-04-15T18:38:52.423Z info: Connected to JSON-RPC provider at http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:38:52.424Z info: Created second verifier wallet with address: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC {"service":"oracle-service"}
2025-04-15T18:38:52.424Z info: Identity contract address: 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:38:52.424Z info: Created identity contract instance with second verifier as signer {"service":"oracle-service"}
2025-04-15T18:38:52.438Z info: Second verifier has VERIFIER_ROLE: false {"service":"oracle-service"}
2025-04-15T18:38:52.438Z info: Granting VERIFIER_ROLE to second verifier: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC {"service":"oracle-service"}
2025-04-15T18:38:52.438Z info: Executing identity.grantRole with args: {"0":"0x0ce23c3e399818cfee81a7ab0880f714e53d7672b08df0fa62f2843416e1ea09","1":"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC","service":"oracle-service"}
2025-04-15T18:38:52.509Z info: Transaction submitted: 0x6a9e994853b919e0f3fea5c2a21d7dcf0b49c5b03b6045f2b5559c4280164604 {"service":"oracle-service"}
2025-04-15T18:38:56.723Z info: Transaction confirmed: 0x6a9e994853b919e0f3fea5c2a21d7dcf0b49c5b03b6045f2b5559c4280164604, block: 22 {"service":"oracle-service"}
2025-04-15T18:38:56.723Z info: Successfully granted VERIFIER_ROLE to second verifier, tx hash: 0x6a9e994853b919e0f3fea5c2a21d7dcf0b49c5b03b6045f2b5559c4280164604 {"service":"oracle-service"}
2025-04-15T18:38:56.739Z info: Second verifier has VERIFIER_ROLE after granting: true {"service":"oracle-service"}
2025-04-15T18:38:56.739Z info: Approving verification as second verifier for token: 1, level: 2 {"service":"oracle-service"}
2025-04-15T18:38:56.827Z info: Transaction submitted: 0xee32e14164f0d833c08f804b28f6917744d5e684a55dc3f65c192766ea798ce9 {"service":"oracle-service"}
2025-04-15T18:39:00.293Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:39:00.307Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:39:00.875Z info: Transaction confirmed in block 23, tx hash: 0xee32e14164f0d833c08f804b28f6917744d5e684a55dc3f65c192766ea798ce9 {"service":"oracle-service"}
2025-04-15T18:39:02.902Z info: Verification level after approval: KYC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:39:02.917Z info: Verification count after approval: 2 {"service":"oracle-service"}
2025-04-15T18:39:02.917Z info: Success: false, Verification count increased: true {"service":"oracle-service"}
2025-04-15T18:39:02.917Z error: Error in second verifier approval process: Do not know how to serialize a BigInt Do not know how to serialize a BigInt {"service":"oracle-service","stack":"TypeError: Do not know how to serialize a BigInt\n    at JSON.stringify (<anonymous>)\n    at stringify (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/express/lib/response.js:1160:12)\n    at ServerResponse.json (/Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/node_modules/express/lib/response.js:271:14)\n    at /Users/mohraska/Desktop/dev/web3/blockchain-identity-system/oracle/src/controllers/verifications.controller.js:622:18\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-04-15T18:39:51.277Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:39:51.279Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:39:51.280Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:39:51.307Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:39:51.308Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:39:51.308Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:39:51.337Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:39:51.347Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:39:51.347Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:39:51.348Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:39:51.348Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:39:51.348Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:39:51.349Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:39:51.349Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:39:51.349Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:39:51.351Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:39:51.351Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:39:51.352Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:39:51.352Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:39:51.373Z info: Current block: 23 {"service":"oracle-service"}
2025-04-15T18:39:51.373Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:39:51.373Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:39:51.399Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:40:00.363Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:40:00.364Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:40:00.377Z info: Polling for verification.VerificationRequested events from block 23 to 23 {"service":"oracle-service"}
2025-04-15T18:40:00.378Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:40:00.391Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:40:00.391Z info: Polling for moderation.ModerationActionCreated events from block 23 to 23 {"service":"oracle-service"}
2025-04-15T18:40:00.391Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:40:00.391Z info: Found 0 missed moderation events {"service":"oracle-service"}
2025-04-15T18:41:00.434Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:41:00.449Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:41:17.762Z info: Shutting down oracle service... {"service":"oracle-service"}
2025-04-15T18:42:16.817Z info: Loaded ABI for DigitalIdentityNFT from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:42:16.819Z info: Loaded ABI for VerificationRegistry from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:42:16.820Z info: Loaded ABI for ModeratorControl from oracle/abis directory {"service":"oracle-service"}
2025-04-15T18:42:16.844Z info: Identity contract initialized at 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:42:16.845Z info: Verification contract initialized at 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 {"service":"oracle-service"}
2025-04-15T18:42:16.846Z info: Moderation contract initialized at 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 {"service":"oracle-service"}
2025-04-15T18:42:16.868Z info: Initializing KYC service with provider: Mock KYC Provider {"service":"oracle-service"}
2025-04-15T18:42:16.873Z info: Oracle service running on port 3030 {"service":"oracle-service"}
2025-04-15T18:42:16.873Z info: Initializing Oracle Service {"service":"oracle-service"}
2025-04-15T18:42:16.874Z info: Running in development mode - some features may be simulated {"service":"oracle-service"}
2025-04-15T18:42:16.874Z info: Registering blockchain event handlers {"service":"oracle-service"}
2025-04-15T18:42:16.874Z info: Registering event listener for verification.VerificationRequested {"service":"oracle-service"}
2025-04-15T18:42:16.875Z info: Registering event listener for moderation.ModerationActionCreated {"service":"oracle-service"}
2025-04-15T18:42:16.875Z info: Registering event listener for identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:42:16.875Z info: Starting scheduled tasks {"service":"oracle-service"}
2025-04-15T18:42:16.877Z info: Scheduled tasks started {"service":"oracle-service"}
2025-04-15T18:42:16.877Z info: Oracle Service initialized successfully {"service":"oracle-service"}
2025-04-15T18:42:16.877Z info: Oracle service started successfully {"service":"oracle-service"}
2025-04-15T18:42:16.878Z error: Unhandled rejection at: {"service":"oracle-service"}
2025-04-15T18:42:16.914Z info: Current block: 18 {"service":"oracle-service"}
2025-04-15T18:42:16.914Z info: Blockchain connection initialized. Connected to http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:42:16.914Z info: Using signer address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 {"service":"oracle-service"}
2025-04-15T18:42:16.939Z info: Oracle has VERIFIER_ROLE. Verification confirmations should work properly. {"service":"oracle-service"}
2025-04-15T18:42:27.537Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:27.579Z info: Creating identity for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:27.593Z info: Executing identity.createIdentity with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","2":["name","email","createdAt"],"3":["Test User","user@example.com","2025-04-15T18:42:27Z"],"service":"oracle-service"}
2025-04-15T18:42:27.668Z info: Transaction submitted: 0xa0f7a15cf75153733af1a600a74591bc6fd71b75f50623fdc84edd51e5d45c61 {"service":"oracle-service"}
2025-04-15T18:42:29.011Z info: Transaction confirmed: 0xa0f7a15cf75153733af1a600a74591bc6fd71b75f50623fdc84edd51e5d45c61, block: 19 {"service":"oracle-service"}
2025-04-15T18:42:29.012Z info: Identity created for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, transaction: 0xa0f7a15cf75153733af1a600a74591bc6fd71b75f50623fdc84edd51e5d45c61 {"service":"oracle-service"}
2025-04-15T18:42:29.027Z info: Event detected: identity.IdentityCreated {"service":"oracle-service"}
2025-04-15T18:42:29.027Z info: New identity created: TokenID 1, Owner: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, DID: did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:29.044Z info: Recording new identity: {"service":"oracle-service","tokenId":"1","owner":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","did":"did:ethr:0x70997970C51812dc3A010C7d01b50e0d17dc79C8","creationDate":"2025-04-15T18:42:29.044Z","verificationLevel":"0"}
2025-04-15T18:42:34.062Z info: Fetching identity details for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:34.091Z info: Found token ID 1 for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:39.535Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:43.575Z info: Running mock verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 {"service":"oracle-service"}
2025-04-15T18:42:43.575Z info: Step 1: Directly verifying the user 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 using Oracle's VERIFIER_ROLE {"service":"oracle-service"}
2025-04-15T18:42:43.575Z info: Step 1a: Processing verification with KYC service {"service":"oracle-service"}
2025-04-15T18:42:43.575Z info: Sending KYC verification request for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8, type: 0 (number) {"service":"oracle-service"}
2025-04-15T18:42:43.575Z debug: Parsed metadata for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: {
  "fullName": "Test User",
  "dateOfBirth": "1990-01-01",
  "documentType": "passport",
  "documentId": "AB123456",
  "nationality": "USA",
  "verificationRequest": "2025-04-15T18:42:43Z"
} {"service":"oracle-service"}
2025-04-15T18:42:43.575Z info: Using mock KYC verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:43.575Z info: Simulating 0 verification for 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:42:43.975Z info: KYC verification successful: {"success":true,"data":{"verificationId":"kyc-1744742563575","level":2,"timestamp":"2025-04-15T18:42:43.575Z","expiresAt":"2026-04-15T18:42:43.575Z","verificationSuccessful":true,"verificationType":"KYC","processedAt":"2025-04-15T18:42:43.575Z","mockProvider":true},"reason":""} {"service":"oracle-service"}
2025-04-15T18:42:43.976Z info: Step 2: Directly calling verify method in VerificationRegistry contract {"service":"oracle-service"}
2025-04-15T18:42:43.977Z info: Executing verification.verify with args: {"0":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","1":0,"2":"{\"fullName\":\"Test User\",\"dateOfBirth\":\"1990-01-01\",\"documentType\":\"passport\",\"documentId\":\"AB123456\",\"nationality\":\"USA\",\"verificationRequest\":\"2025-04-15T18:42:43Z\"}","3":"0x","service":"oracle-service"}
2025-04-15T18:42:44.060Z info: Transaction submitted: 0x88b095e20d44c6d2938e734c2a4aa5baa124d5e07adc50a3320d1427c1f3e2f4 {"service":"oracle-service"}
2025-04-15T18:42:45.097Z info: Transaction confirmed: 0x88b095e20d44c6d2938e734c2a4aa5baa124d5e07adc50a3320d1427c1f3e2f4, block: 20 {"service":"oracle-service"}
2025-04-15T18:42:45.097Z info: Address verified in blockchain with transaction hash: 0x88b095e20d44c6d2938e734c2a4aa5baa124d5e07adc50a3320d1427c1f3e2f4 {"service":"oracle-service"}
2025-04-15T18:42:45.097Z info: Step 3: Waiting for verification transaction to be processed {"service":"oracle-service"}
2025-04-15T18:42:47.098Z info: Verification ID: 0x14e04a66bf74771820a7400ff6cf065175b3d7eb25805a5bd1633b161af5d101 {"service":"oracle-service"}
2025-04-15T18:42:47.112Z info: Got token ID for address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8: 1 {"service":"oracle-service"}
2025-04-15T18:42:47.112Z info: Step 5: Approving verification for token ID 1 to BASIC_VERIFIED level {"service":"oracle-service"}
2025-04-15T18:42:47.112Z info: Executing identity.approveVerification with args: {"0":"1","1":1,"service":"oracle-service"}
2025-04-15T18:42:47.180Z info: Transaction submitted: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:42:49.141Z info: Transaction confirmed: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0, block: 21 {"service":"oracle-service"}
2025-04-15T18:42:49.141Z info: DigitalIdentityNFT verification approved with transaction hash: 0x60b793e0623e5c820bacb21781309a6ecb4b0bbc9ab2f5b389698ada3da8efc0 {"service":"oracle-service"}
2025-04-15T18:42:49.158Z info: Current verification level after approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:43:00.934Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:43:00.949Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:43:03.768Z info: Fetching pending verifications {"service":"oracle-service"}
2025-04-15T18:43:07.610Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:43:13.893Z info: Adding second verifier approval for token 1, level 2 - DIRECT METHOD {"service":"oracle-service"}
2025-04-15T18:43:13.907Z info: Current verification level before approval: BASIC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:43:13.920Z info: Current verification count: 1 {"service":"oracle-service"}
2025-04-15T18:43:13.933Z info: VERIFIER_ROLE hash: 0x0ce23c3e399818cfee81a7ab0880f714e53d7672b08df0fa62f2843416e1ea09 {"service":"oracle-service"}
2025-04-15T18:43:13.934Z info: Using second verifier private key (truncated): 0x5de4111a... {"service":"oracle-service"}
2025-04-15T18:43:13.934Z info: Connected to JSON-RPC provider at http://localhost:8545 {"service":"oracle-service"}
2025-04-15T18:43:13.934Z info: Created second verifier wallet with address: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC {"service":"oracle-service"}
2025-04-15T18:43:13.934Z info: Identity contract address: 0x5FbDB2315678afecb367f032d93F642f64180aa3 {"service":"oracle-service"}
2025-04-15T18:43:13.934Z info: Created identity contract instance with second verifier as signer {"service":"oracle-service"}
2025-04-15T18:43:13.949Z info: Second verifier has VERIFIER_ROLE: false {"service":"oracle-service"}
2025-04-15T18:43:13.949Z info: Granting VERIFIER_ROLE to second verifier: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC {"service":"oracle-service"}
2025-04-15T18:43:13.949Z info: Executing identity.grantRole with args: {"0":"0x0ce23c3e399818cfee81a7ab0880f714e53d7672b08df0fa62f2843416e1ea09","1":"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC","service":"oracle-service"}
2025-04-15T18:43:14.014Z info: Transaction submitted: 0x6a9e994853b919e0f3fea5c2a21d7dcf0b49c5b03b6045f2b5559c4280164604 {"service":"oracle-service"}
2025-04-15T18:43:17.290Z info: Transaction confirmed: 0x6a9e994853b919e0f3fea5c2a21d7dcf0b49c5b03b6045f2b5559c4280164604, block: 22 {"service":"oracle-service"}
2025-04-15T18:43:17.290Z info: Successfully granted VERIFIER_ROLE to second verifier, tx hash: 0x6a9e994853b919e0f3fea5c2a21d7dcf0b49c5b03b6045f2b5559c4280164604 {"service":"oracle-service"}
2025-04-15T18:43:17.305Z info: Second verifier has VERIFIER_ROLE after granting: true {"service":"oracle-service"}
2025-04-15T18:43:17.305Z info: Approving verification as second verifier for token: 1, level: 2 {"service":"oracle-service"}
2025-04-15T18:43:17.387Z info: Transaction submitted: 0xee32e14164f0d833c08f804b28f6917744d5e684a55dc3f65c192766ea798ce9 {"service":"oracle-service"}
2025-04-15T18:43:21.425Z info: Transaction confirmed in block 23, tx hash: 0xee32e14164f0d833c08f804b28f6917744d5e684a55dc3f65c192766ea798ce9 {"service":"oracle-service"}
2025-04-15T18:43:23.443Z info: Verification level after approval: KYC VERIFIED (undefined) {"service":"oracle-service"}
2025-04-15T18:43:23.465Z info: Verification count after approval: 2 {"service":"oracle-service"}
2025-04-15T18:43:23.465Z info: Success: false, Verification count increased: true {"service":"oracle-service"}
2025-04-15T18:43:28.353Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:43:36.210Z info: Fetching verification level for address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 {"service":"oracle-service"}
2025-04-15T18:44:00.989Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:44:01.008Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:45:00.064Z info: Checking for pending verifications {"service":"oracle-service"}
2025-04-15T18:45:00.068Z info: Polling for missed events {"service":"oracle-service"}
2025-04-15T18:45:00.083Z info: Polling for verification.VerificationRequested events from block 18 to 23 {"service":"oracle-service"}
2025-04-15T18:45:00.085Z info: Found 0 pending verifications {"service":"oracle-service"}
2025-04-15T18:45:00.098Z info: Found 0 missed verification events {"service":"oracle-service"}
2025-04-15T18:45:00.098Z info: Polling for moderation.ModerationActionCreated events from block 23 to 23 {"service":"oracle-service"}
2025-04-15T18:45:00.098Z warn: Development mode: Error querying for events moderation.ModerationActionCreated: unknown fragment (argument="event", value="ModerationActionCreated", code=INVALID_ARGUMENT, version=6.13.5) {"service":"oracle-service"}
2025-04-15T18:45:00.098Z info: Found 0 missed moderation events {"service":"oracle-service"}
